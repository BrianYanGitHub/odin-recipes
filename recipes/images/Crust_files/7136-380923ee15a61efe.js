(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7136],{56029:function(e,t,r){var n=r(33448);e.exports=function(e,t,r){for(var o=-1,i=e.length;++o<i;){var c=e[o],s=t(c);if(null!=s&&(void 0===a?s===s&&!n(s):r(s,a)))var a=s,u=c}return u}},53325:function(e){e.exports=function(e,t){return e>t}},78565:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e,r){return null!=e&&t.call(e,r)}},70433:function(e){e.exports=function(e,t){return e<t}},10107:function(e){e.exports=function(e,t,r,n,o){return o(e,(function(e,o,i){r=n?(n=!1,e):t(r,e,o,i)})),r}},18721:function(e,t,r){var n=r(78565),o=r(222);e.exports=function(e,t){return null!=e&&o(e,t,n)}},66604:function(e,t,r){var n=r(89465),o=r(47816),i=r(67206);e.exports=function(e,t){var r={};return t=i(t,3),o(e,(function(e,o,i){n(r,o,t(e,o,i))})),r}},6162:function(e,t,r){var n=r(56029),o=r(53325),i=r(6557);e.exports=function(e){return e&&e.length?n(e,i,o):void 0}},53632:function(e,t,r){var n=r(56029),o=r(70433),i=r(6557);e.exports=function(e){return e&&e.length?n(e,i,o):void 0}},54061:function(e,t,r){var n=r(62663),o=r(89881),i=r(67206),c=r(10107),s=r(1469);e.exports=function(e,t,r){var a=s(e)?n:c,u=arguments.length<3;return a(e,i(t,4),r,u,o)}},89540:function(e,t,r){"use strict";r.d(t,{Y:function(){return c}});var n=r(67294),o=r(30094);const i=[],c=()=>(e=>{var t,r;const c=null===(t=(0,o.r)(e)())||void 0===t||null===(r=t.metadata)||void 0===r?void 0:r.experience_type;return(0,n.useMemo)((()=>c&&"string"===typeof c?c.split(","):i),[c])})()},59491:function(e,t,r){"use strict";r.d(t,{K:function(){return a},u:function(){return s}});var n=r(67294),o=r(84601),i=r(32790),c=r(20195);const s=()=>{const e=(0,c.kO)();return null!==e&&void 0!==e?e:i.AP},a=()=>{const{queryState:e,preferredStoreId:t}=(0,c.lo)(),r=e.status===o.o.Success||e.status===o.o.Error,s=null!==t&&void 0!==t?t:i.AP;return(0,n.useMemo)((()=>({queryState:e,enabled:r,pricingStoreId:s})),[e,r,s])}},64459:function(e,t,r){"use strict";r.d(t,{p:function(){return M}});var n=r(59499),o=r(18721),i=r.n(o),c=r(11163),s=r(67294),a=r(41982),u=r(17543),l=r(54633),d=r(26221),p=r(59491),f=r(44908),v=r.n(f),b=r(68697),_=r(84601),m=r(59681),y=r(11041),O=r(65359),g=r(17132),j=r(82283),P=r(20195),h=r(68815);const w=(0,b.P1)(y.Ys,(e=>null===e||void 0===e?void 0:e.filter(m.y))),E=()=>{const{preferredStoreId:e,queryState:t}=(0,P.lo)(),{nearbyStoreIds:r,enabled:n}=(()=>{const[e,t]=(0,j.h)(),r=e(O.j5),[n,o]=(0,g.Zu)({limit:h.Af,place:r}),i=n(w),c=(o.status===_.o.Success||o.status===_.o.Error)&&(t.status===_.o.Success||t.status===_.o.Error);return(0,s.useMemo)((()=>t.status!==_.o.Success&&t.status!==_.o.Error||r?{nearbyStoreIds:i,enabled:c}:{nearbyStoreIds:void 0,enabled:!0}),[t.status,r,i,c])})(),o=(0,s.useMemo)((()=>v()([e,...null!==r&&void 0!==r?r:[]]).filter(m.y)),[e,r]),i=n&&(t.status===_.o.Success||t.status===_.o.Error);return(0,s.useMemo)((()=>({storeIds:o,enabled:i})),[o,i])};var S=r(70563),k=r(6432),D=r(48113),I=r(1344);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e){const t=(t,r)=>{var n,o;const f=(()=>{var e,t,r;const{asPath:n}=null!==(e=(0,c.useRouter)())&&void 0!==e?e:{},[o]=(0,l.fo)(),i=null!==(t=o(d.Pg)||o(d.Vl))&&void 0!==t?t:(0,D.ej)("mid"),f=(0,a.MP)()||Boolean(i),{pricingStoreId:v,enabled:b}=(0,p.K)(),{storeIds:_,enabled:m}=E(),y=_.join(","),O=null!==(r=(0,S.OP)())&&void 0!==r?r:"0",g=(0,u.ew)(n),{include_sponsored:j,enabled:P}=(0,I.f)(),h=(0,s.useMemo)((()=>({member_id:i,pricing_store_id:v,purchasable_store_ids:y,visitor_id:O,channel:"WEB",page:g,platform:(0,k.o$)(),include_sponsored_recommendations:j})),[j,i,g,v,y,O]),w=f&&b&&m&&P;return(0,s.useMemo)((()=>({variables:h,enabled:w})),[h,w])})(),v=Object.fromEntries(Object.entries(t).filter((e=>{let[,t]=e;return null!=t}))),b=q(q(q({},f.variables),v),{},{page:null!==(n=null!==(o=v.page_id)&&void 0!==o?o:v.page)&&void 0!==n?n:f.variables.page}),_=i()(r,"enabled")?Boolean((null===r||void 0===r?void 0:r.enabled)&&f.enabled):f.enabled;return e(b,q(q({},r),{},{enabled:_}))};return t.queryName=e.queryName,t}},99662:function(e,t,r){"use strict";r.d(t,{q:function(){return p}});var n=r(59499),o=r(64595),i=r(76291),c=r(64459),s=r(4334);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const l="@web/domain-product/get-guest-specific-recommendations-placement",{useQuery:d}=(0,o.J)({name:l,keyFn:e=>("undefined"!==typeof e.channel||"undefined"!==typeof e.placement_id||"undefined"!==typeof e.page||"undefined"!==typeof e.visitor_id||"undefined"!==typeof e.member_id)&&[l,e],queryFn:async e=>{const t=await(0,i.W)(),{data:r,ok:n,statusText:o}=await(0,s.r)({requestParams:u({effective_date:t},e)});if(n)return null===r||void 0===r?void 0:r.data;throw new Error("".concat(o))}}),p=(0,c.p)(d)},4334:function(e,t,r){"use strict";r.d(t,{r:function(){return a}});var n=r(59499),o=r(88141),i=r(92354),c=r(96012);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const a=e=>{const{fetchOptions:t,requestParams:r}=null!==e&&void 0!==e?e:{},{channel:a,placement_id:u,page:l,visitor_id:d,pricing_store_id:p,member_id:f,category_id:v,tcins:b,purchasable_store_ids:_,offer_id:m,keyword:y,include_sponsored_recommendations:O,effective_date:g,fulfillment_types:j,brand_ids:P,resolve_to_first_variation_child:h,slingshot_component_id:w}=null!==r&&void 0!==r?r:{},{apiKey:E,baseUrl:S,apis:{product:k}}=(0,c.asConfigV2)(c.config).services.redskyAggregations;if(!a||!u||!l||!d)throw new Error("Required parameters not defined for general recommendations placement query");const D={category_id:v,channel:a,effective_date:g,include_sponsored_recommendations:O,key:E,keyword:y,member_id:f,offer_id:m,page:l,placement_id:u,pricing_store_id:p,purchasable_store_ids:_,tcins:b,visitor_id:d,fulfillment_types:j,brand_ids:P,resolve_to_first_variation_child:h,slingshot_component_id:w},I=i.Z.buildURLWithParams(new URL(k.endpointPaths.generalRecommendationsPlacementV1,S),D);return(0,o.G)(I,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({partialErrorTag:"get_general_recommendations_placement_partial_api_error",errorTag:"get_general_recommendations_placement_api_error",timerTag:"get_general_recommendations_placement_api_call"},t))}},35801:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var n=r(41609),o=r.n(n);const i=e=>{if(o()(e)||!e)return;const t=e.split(";").map((e=>{var t;const[r,...n]=null!==(t=e.split(","))&&void 0!==t?t:[];return[r,null===n||void 0===n?void 0:n.join(",")]}));return Object.fromEntries(t)}},63893:function(e,t,r){"use strict";r.d(t,{y:function(){return a}});var n=r(59499),o=r(99662),i=r(35801);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const a=async(e,t)=>{var r,n,c;if(!(null===t||void 0===t||null===(r=t.res)||void 0===r||null===(n=r.cdnMetadata)||void 0===n?void 0:n.isBot))return;const a=[],u=Object.values(null!==(c=null===e||void 0===e?void 0:e.slots)&&void 0!==c?c:{}),l=null===u||void 0===u?void 0:u.filter((e=>{var t,r,n,o;return"Item or Promotion Carousel"===(null===(t=e.metadata)||void 0===t||null===(r=t.components)||void 0===r?void 0:r[0].type_name)&&"personalizedProducts"===(null===e||void 0===e||null===(n=e.content)||void 0===n||null===(o=n.container)||void 0===o?void 0:o.type)}));null===l||void 0===l||l.forEach((r=>{var n,c,u,l,d;const p=(0,i.g)(null===r||void 0===r||null===(n=r.content)||void 0===n||null===(c=n.container)||void 0===c||null===(u=c.keyValuePairs)||void 0===u?void 0:u.context),f={brand_ids:null===p||void 0===p?void 0:p.brandId,category_id:null===p||void 0===p?void 0:p.categoryId,fulfillment_types:null===p||void 0===p?void 0:p.fulfillmentId,offer_id:null===p||void 0===p?void 0:p.offerId,placement_id:null===p||void 0===p?void 0:p.placementId};a.push(null===t||void 0===t?void 0:t.preloadInitialQuery(o.q,s(s({},f),{},{page:null===e||void 0===e||null===(l=e.metadata)||void 0===l||null===(d=l.seo_data)||void 0===d?void 0:d.page_id,include_sponsored_recommendations:!1,channel:"WEB",platform:"desktop",pricing_store_id:"3991",purchasable_store_ids:"",visitor_id:"0"})))})),await Promise.all(a)}}}]);