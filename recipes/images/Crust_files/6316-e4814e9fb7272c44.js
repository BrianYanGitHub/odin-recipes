"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6316],{46316:function(e,t,r){r.d(t,{$:function(){return He}});var n=r(73955),o=r.n(n),i=r(85893),a=r(67294),s=r(22503),c=r(32009),l=r(41982),u=r(17724),p=r(6432),f=r(54633),v=r(26221),d=r(59499),b=r(64595),O=r(39602),y=r(69027),g=r(92354),m=r(72113),w=r(6874);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const h=(0,m.N)()((e=>{const{fetchOptions:t,requestParams:r}=e,{guest:n}=(0,w.G)();if(!n.favoritesV2.apiKey)throw new Error("Missing guest favorites V2 apiKey.");const o=g.Z.buildURLWithParams(new URL(n.favoritesV2.endpointPaths.favoritesV2,n.favoritesV2.baseUrl),{guest_id:r.guest_id,key:n.favoritesV2.apiKey});return{fetch:()=>(0,y.U2)(o,P(P({},t),{},{credentials:"include",errorTag:"get_guest_favorites_v2_api_error",timerTag:"get_guest_favorites_v2_api_call"})),url:o,options:e}}));function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const k="@web/domain-guest/get-guest-favorites",E="@web/domain-guest/guestFavorites",T=3e5,{useQuery:S}=(0,b.J)({name:k,defaultOptions:{staleTime:T,cacheTime:T},keyFn:e=>{if(!e.guest_id)throw new Error("Please pass a `guest_id` to get guest favorites.");return[k,e]},queryFn:async(e,t)=>{const{guest_id:r}=e;await(0,O.rz)(E,O.ZP);const n=await O.ZP.get(E);if(n)return n;const o=h({requestParams:{guest_id:r}}),{data:i,ok:a,statusText:s}=await o.fetch();if(a)return await O.ZP.set(E,i,null!==t&&void 0!==t&&t.cacheTime?Date.now()+t.cacheTime:void 0),i;throw new Error("".concat(s))}}),Z=(e,t)=>{var r;const[n]=(0,f.fo)(),o=n(v.Vl);return S(D(D({},e),{},{guest_id:o}),D(D({},t),{},{enabled:(null===(r=null===t||void 0===t?void 0:t.enabled)||void 0===r||r)&&Boolean(o)}))};Z.queryName=S.queryName;const N=(0,l.Hv)(Z,{allowAnonymous:!1});var V=r(96012);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const C=(0,m.N)()((e=>{const{fetchOptions:t}=e,{apis:{favoritesV1:r},baseUrl:n}=(0,V.asConfigV2)(V.config).services.apiPlatform,o=g.Z.buildURLWithParams(new URL(r.endpointPaths.list_items,n),{});return{fetch:()=>(0,y.U2)(o,x(x({},t),{},{credentials:"include",errorTag:"get_favorites_v1_api_error",timerTag:"get_favorites_v1_api_call"})),url:o,options:e}}));function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const I="@web/domain-guest/get-favorites-v1",q="@web/domain-guest/guestFavorites",U=3e5,{useQuery:R}=(0,b.J)({name:I,defaultOptions:{staleTime:U,cacheTime:U},keyFn:e=>[I,e],queryFn:async(e,t)=>{await(0,O.rz)(q,O.ZP);const r=await O.ZP.get(q);if(null!==r&&void 0!==r&&r.list_items)return r;const n=C({}),{data:o,ok:i,statusText:a}=await n.fetch();if(i)return await O.ZP.set(q,o,null!==t&&void 0!==t&&t.cacheTime?Date.now()+t.cacheTime:void 0),o;throw new Error("".concat(a))}}),A=(e,t)=>{var r;const n=(0,l.bC)();return R(L(L({},e),{},{guest_id:n}),L(L({},t),{},{enabled:(null===(r=null===t||void 0===t?void 0:t.enabled)||void 0===r||r)&&Boolean(n)}))};A.queryName=R.queryName;const J=(0,l.Hv)(A,{minimumAssuranceLevel:l.Jr});var z=r(47037),W=r.n(z),B=r(98689),K=r(52383);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Q=(0,m.N)()((e=>{const{fetchOptions:t,requestParams:r}=null!==e&&void 0!==e?e:{},{guest:n}=(0,w.G)();if(!n.favoritesV2.apiKey)throw new Error("Missing guest favorites V2 apiKey.");const o=g.Z.buildURLWithParams(new URL(n.favoritesV2.endpointPaths.favoritesV2,n.favoritesV2.baseUrl),{key:n.favoritesV2.apiKey});return{fetch:()=>(0,y.v_)(o,H(H({},t),{},{credentials:"include",body:JSON.stringify(r),errorTag:"post_guest_favorites_v2_api_error",timerTag:"post_guest_favorites_v2_api_call"})),options:e,url:o}}));function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{useMutation:X}=(0,B.F)({name:"@web/domain-guest/add-guest-favorite",mutationFn:async e=>{const t=Q({requestParams:e}),r=await t.fetch();return null===r||void 0===r?void 0:r.data}}),ee=e=>{const[t]=(0,f.fo)(),r=t(v.Vl),[n,o]=X(e);return[async e=>{const t=await n($($({},e),{},{guest_id:W()(r)?Number.parseInt(r,10):r})),o=await O.ZP.get(E),i=[t,...null!==o&&void 0!==o?o:[]];return await O.ZP.set(E,i,Date.now()+T),await(0,K.Dm)(k),t},o]};ee.mutationName=X.mutationName;const te=(0,l.tW)(ee);function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const oe=(0,m.N)()((e=>{const{fetchOptions:t,requestParams:r}=null!==e&&void 0!==e?e:{},{apis:{favoritesV1:n},baseUrl:o}=(0,V.asConfigV2)(V.config).services.apiPlatform,i=g.Z.buildURLWithParams(new URL(n.endpointPaths.list_items,o),{});return{fetch:()=>(0,y.v_)(i,ne(ne({},t),{},{credentials:"include",body:JSON.stringify(r),errorTag:"post_favorites_v1_api_error",timerTag:"post_favorites_v1_api_call"})),options:e,url:i}}));function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{useMutation:se}=(0,B.F)({name:"@web/domain-guest/add-favorite-v1",mutationFn:async e=>{const t=oe({requestParams:e}),r=await t.fetch();return null===r||void 0===r?void 0:r.data}}),ce=e=>{const[t,r]=se(e);return[async e=>{var r;const n=await t(ae({},e)),o=await O.ZP.get(q),i=ae(ae({},null!==o&&void 0!==o?o:{}),{},{list_items:[n,...null!==(r=null===o||void 0===o?void 0:o.list_items)&&void 0!==r?r:[]]});return await O.ZP.set(q,i,Date.now()+U),await(0,K.Dm)(I),n},r]};ce.mutationName=se.mutationName;const le=(0,l.tW)(ce,{minimumAssuranceLevel:l.Jr});var ue=r(59681);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ve=(0,m.N)()((e=>{const{fetchOptions:t,requestParams:r}=null!==e&&void 0!==e?e:{},{guest:n}=(0,w.G)();if(!n.favoritesV2.apiKey)throw new Error("Missing guest favorites V2 apiKey.");const{identifier:o,guest_id:i}=r,a=g.Z.buildURLWithParams(new URL("".concat(n.favoritesV2.endpointPaths.favoritesV2,"/").concat(i,"_").concat(o),n.favoritesV2.baseUrl),{key:n.favoritesV2.apiKey});return{fetch:()=>(0,y.IV)(a,fe(fe({},t),{},{credentials:"include",errorTag:"delete_guest_favorites_v2_api_error",timerTag:"delete_guest_favorites_v2_api_call"})),options:e,url:a}}));function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{useMutation:Oe}=(0,B.F)({name:"@web/domain-guest/remove-guest-favorite",mutationFn:async e=>{const t=ve({requestParams:e}),r=await t.fetch();return null===r||void 0===r?void 0:r.data}}),ye=e=>{const[t]=(0,f.fo)(),r=t(v.Vl),[n,o]=Oe(e);return[async e=>{var t;const o=await n(be(be({},e),{},{identifier:null!==(t=null===e||void 0===e?void 0:e.identifier)&&void 0!==t?t:"",guest_id:r})),i=await O.ZP.get(E),a=[...(null!==i&&void 0!==i?i:[]).filter(ue.y).filter((e=>"partnumber"!==e.identifier_type||e.identifier!==(null===o||void 0===o?void 0:o.identifier)))];return await O.ZP.set(E,a,Date.now()+T),await(0,K.Dm)(k),o},o]};ye.mutationName=Oe.mutationName;const ge=(0,l.tW)(ye);function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const je=(0,m.N)()((e=>{const{fetchOptions:t,requestParams:r}=null!==e&&void 0!==e?e:{},{apis:{favoritesV1:n},baseUrl:o}=(0,V.asConfigV2)(V.config).services.apiPlatform,i=null===r||void 0===r?void 0:r.list_item_id,a=g.Z.buildURLWithParams(new URL("".concat(n.endpointPaths.list_items,"/").concat(i),o),{});return{fetch:()=>(0,y.IV)(a,we(we({},t),{},{credentials:"include",errorTag:"delete_favorites_v1_api_error",timerTag:"delete_favorites_v1_api_call"})),options:e,url:a}}));function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{useMutation:_e}=(0,B.F)({name:"@web/domain-guest/remove-favorite",mutationFn:async e=>{const t=je({requestParams:e}),r=await t.fetch();return null===r||void 0===r?void 0:r.data}}),De=e=>{const[t,r]=_e(e);return[async e=>{const r=await t(he({},e)),n=await O.ZP.get(q),o=null===n||void 0===n?void 0:n.list_items,i=null===o||void 0===o?void 0:o.filter(ue.y).filter((e=>"TCIN"!==(null===e||void 0===e?void 0:e.item_type)||(null===e||void 0===e?void 0:e.tcin)!==(null===r||void 0===r?void 0:r.tcin))),a=he(he({},null!==n&&void 0!==n?n:{}),{},{list_items:i});return await O.ZP.set(q,a,Date.now()+U),await(0,K.Dm)(I),r},r]};De.mutationName=_e.mutationName;const ke=(0,l.tW)(De,{minimumAssuranceLevel:l.Jr});var Ee=r(49018),Te=r(26306),Se=r(60713),Ze=r(87548),Ne=r(74444),Ve=r(84314);function Fe(){var e=(0,Ve._)(['<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" focusable="false" role="presentation"><path d="M21.67 6.224c-1.284-2.093-3.4-3.065-5.741-2.617-1.436.375-2.569 1.196-3.475 2.318l-.453.599-.455-.599c-.906-1.122-2.04-1.943-3.475-2.318-2.342-.448-4.457.524-5.74 2.617-.844 1.408-.937 2.8-.75 4.197.214 1.596 1.24 3.284 2.344 4.425.814.84 8.079 7.654 8.079 7.654 2.263-2.094 7.257-6.814 8.07-7.654 1.105-1.141 2.132-2.83 2.346-4.425.186-1.397.092-2.79-.75-4.197z" fill-rule="evenodd"/></svg>']);return Fe=function(){return e},e}var xe=(0,r(53131).No)(Fe()),Ce={width:24,height:24,id:"PersonalizationFavorites",monochrome:!0,grayscale:!1,fullColor:!1,fills:["#cc0000"],nameComponents:{name:"Favorites",category:"Personalization",variant:null}},Me=function(e){var t=e.id||o()("nds-Icon"),r=xe({idPrefix:t});return a.createElement(Ve.I,Object.assign({},e,{svgData:r,svgMetadata:Ce}))};Me.metadata=Ce,Me.displayName="IconPersonalizationFavorites";var Le=r(45319),Ie=r(29709),qe=r(19521),Ue=r(14059);const Re=qe.ZP.div.withConfig({displayName:"styles__FavoritesButtonStyled",componentId:"sc-19se466-0"})(["border-radius:50%;display:inherit;padding:3px;border:1px solid ",";background-color:",";background-image:none;position:relative;font-size:0;touch-action:manipulation;cursor:pointer;user-select:none;&:active > svg{opacity:0.8;transform:scale(0.8);path{fill:",";}}"],Ue.colors.palette.gray.light,Ue.colors.palette.white,Ue.colors.palette.red.default),Ae=qe.ZP.span.withConfig({displayName:"styles__SvgWrapper",componentId:"sc-19se466-1"})(["position:relative;top:1px;"]);var Je;!function(e){e.search="search",e.recommendations="recommendations",e.bia="bia"}(Je||(Je={}));const ze=(0,a.createContext)({placementType:Je.search}),We=l.Y3,Be=[l.Y3,l.Jr,l.IB],Ke={unlovedMessage:(0,i.jsx)("div",{children:"Click to sign in and save"}),lovedMessage:(0,i.jsx)("div",{children:"Signing in ..."}),stickyJustLovedMessage:(0,i.jsx)("div",{children:"Signing in ..."})},Ge={unlovedMessage:(0,i.jsx)("div",{children:"Favorite to keep tabs on it"}),lovedMessage:(0,i.jsx)("div",{children:"Remove it from your \u2665s"}),stickyJustLovedMessage:(0,i.jsxs)("div",{children:["Favorited!\xa0",(0,i.jsx)(s.r,{href:"/yr/crush",underline:"always",children:"See all of your favorites"})]})},He=(0,a.memo)((e=>{var t,r,n;let{popoverTailPosition:s}=e;const d=(0,u.rS)(),b=(0,Ie.T)(),O=null!==(t=null===b||void 0===b?void 0:b.SAPPHIRE_FAVORITES_V1_FLAG)&&void 0!==t&&t,[y]=(0,f.fo)(),g=y(v.co),{placementType:m}=(0,a.useContext)(ze),[w]=N({},{enabled:!O}),[j]=J({},{enabled:O}),P=null===(r=j())||void 0===r||null===(n=r.list_items)||void 0===n?void 0:n.filter(ue.y),h=w(),_=Array.isArray(h)?h.filter(ue.y):void 0,D=(0,Ee.ct)(Te.hg),k=(0,Ee.Ao)(Te.hg),E=(0,Se.T)(),T=(0,Ee.ct)(Ze.zZ),S=(0,Ee.ct)(Ne.qJ),Z=(0,a.useCallback)((e=>"partnumber"===(null===e||void 0===e?void 0:e.identifier_type)&&((null===e||void 0===e?void 0:e.identifier)===D||(null===e||void 0===e?void 0:e.identifier)===k)),[D,k]),V=(0,a.useCallback)((e=>"TCIN"===(null===e||void 0===e?void 0:e.item_type)&&((null===e||void 0===e?void 0:e.tcin)===D||(null===e||void 0===e?void 0:e.tcin)===k)),[D,k]),F=(0,a.useMemo)((()=>O?null===P||void 0===P?void 0:P.some((e=>V(e))):null===_||void 0===_?void 0:_.some((e=>Z(e)))),[Z,V,P,_,O]);(0,a.useEffect)((()=>{U(F)}),[F]);const x=g?Ke:Ge,{0:C,1:M}=(0,a.useState)(""),{0:L,1:I}=(0,a.useState)(!1),{0:q,1:U}=(0,a.useState)(F),{0:R}=(0,a.useState)((()=>o()("favorites-button-"))),A=(0,a.useRef)(null),z=(0,a.useCallback)((e=>A.current=e),[A]),[W]=te(),[B]=le(),K=(0,a.useCallback)((async()=>{if(!D)return;g||d.trackEvent({guest:{eventType:"click"},crush:{lovedItems:{removed:!1},loved:!0},products:[{tcin:D,placementType:m}]});const{assuranceLevel:e,guestType:t}=await(0,l.xF)();e&&!Be.includes(e)||t!==l.R1?(0,l.Iq)(We):O?B({tcin:D,item_note:"",item_type:"TCIN"}):W({channel_name:"tablet",identifier_type:S?"collection":"partnumber",identifier:D,price:S?void 0:T})}),[D,g,m,d,B,W,S,T,O]),[G]=ge(),[H]=ke(),Q=(0,a.useCallback)((async()=>{if(!D)return;g||d.trackEvent({guest:{eventType:"click"},crush:{lovedItems:{removed:!0},loved:!1},products:[{tcin:D,placementType:m}]});const{assuranceLevel:e,guestType:t}=await(0,l.xF)();if(e&&!Be.includes(e)||t!==l.R1)(0,l.Iq)(We);else if(O){var r;const e=null===P||void 0===P||null===(r=P.find((e=>(null===e||void 0===e?void 0:e.tcin)===D)))||void 0===r?void 0:r.list_item_id;H({list_item_id:e})}else G({identifier:D})}),[D,g,m,d,H,P,G,O]),Y=(0,a.useCallback)((()=>{I(!1),setTimeout((()=>{q?(I(!0),M(x.lovedMessage)):(I(!0),M(x.unlovedMessage))}),0)}),[q,x]),$=(0,a.useCallback)((()=>{const e=!q;I(!1),U(e),setTimeout((()=>{e?(I(!0),M(x.stickyJustLovedMessage)):(I(!0),M(x.unlovedMessage))}),0),K&&e&&K(),Q&&!e&&Q()}),[q,x,K,Q]),X=(0,a.useCallback)((()=>{C!==x.stickyJustLovedMessage&&I(!1)}),[x,C]),ee=(0,a.useCallback)((e=>{var t;const r=null===e||void 0===e?void 0:e.relatedTarget;!r||!A.current||null!==(t=A.current)&&void 0!==t&&t.contains(r)||I(!1)}),[A]),re=(e=>{const{title:t="this item",isFavorited:r,isAnonymous:n}=e;return r?"remove ".concat(t," from your favorites"):"".concat(n?"sign in to ":"","favorite ").concat(t," to keep tabs on it")})({title:E,isFavorited:q,isAnonymous:g}),ne=!(0,p.tq)()&&!(0,p.zc)();return(0,i.jsxs)(Re,{className:"h-display-inline-block",children:[ne&&(0,i.jsx)(c.J2,{childRef:z,isOpen:L,placement:"top",tailPosition:s,target:R,toggle:ee,variant:"secondary",children:C}),(0,i.jsx)("button",{"aria-label":re,"data-test":"FavoritesButton",id:R,onBlur:ee,onClick:$,onFocus:Y,onMouseEnter:Y,onMouseLeave:X,type:"button",children:q?(0,i.jsx)(Ae,{children:(0,i.jsx)(Me,{"data-test":"PersonalizationFavorites",size:24})}):(0,i.jsx)(Ae,{children:(0,i.jsx)(Le.k,{"data-test":"IconGeneralHeartOutline",size:24})})})]})}));He.displayName="FavoritesButton"},45319:function(e,t,r){r.d(t,{k:function(){return u}});var n=r(84314),o=r(67294),i=r(73955),a=r.n(i);function s(){var e=(0,n._)(['<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" focusable="false" role="presentation"><path d="M21.281 9.076c-.317 1.427-1.031 2.776-2.142 3.966a108.712 108.712 0 01-4.284 4.284c-.872.872-1.824 1.745-2.776 2.618l-.08.08-.079-.08c-.952-.873-1.904-1.746-2.776-2.618a108.137 108.137 0 01-4.283-4.284c-1.111-1.19-1.825-2.539-2.142-3.966-.397-1.666.158-2.856.635-3.57.696-1.046 1.903-1.81 3.18-1.895 2.027-.136 3.465 1.45 4.498 2.982.29.43.603.847.9 1.274l.068.099.068-.099c.296-.427.609-.843.9-1.274 1.033-1.531 2.47-3.118 4.497-2.982 1.278.085 2.484.849 3.181 1.895.477.714 1.032 1.904.635 3.57M12 5.004a6.535 6.535 0 00-1.476-1.72c-1.207-1.003-3.06-1.661-4.632-1.269-2.46.397-5.553 3.253-4.76 7.298.352 1.799 1.321 3.41 2.539 4.755 1.376 1.52 2.868 2.951 4.363 4.369A203.883 203.883 0 0012 22.1a201.526 201.526 0 003.966-3.663c1.496-1.418 2.986-2.848 4.362-4.369 1.219-1.345 2.187-2.956 2.54-4.755.793-4.045-2.301-6.9-4.76-7.298-1.571-.392-3.425.266-4.633 1.27A6.532 6.532 0 0012 5.004" fill-rule="evenodd"/></svg>']);return s=function(){return e},e}var c=(0,r(53131).No)(s()),l={width:24,height:24,id:"GeneralHeartOutline",monochrome:!0,grayscale:!1,fullColor:!1,fills:["#333333"],nameComponents:{name:"HeartOutline",category:"General",variant:null}},u=function(e){var t=e.id||a()("nds-Icon"),r=c({idPrefix:t});return o.createElement(n.I,Object.assign({},e,{svgData:r,svgMetadata:l}))};u.metadata=l,u.displayName="IconGeneralHeartOutline"}}]);